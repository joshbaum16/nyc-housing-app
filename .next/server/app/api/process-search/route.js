"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/process-search/route";
exports.ids = ["app/api/process-search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-search%2Froute&page=%2Fapi%2Fprocess-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-search%2Froute.ts&appDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-search%2Froute&page=%2Fapi%2Fprocess-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-search%2Froute.ts&appDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_joshbaum_nyc_housing_app_app_api_process_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/process-search/route.ts */ \"(rsc)/./app/api/process-search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/process-search/route\",\n        pathname: \"/api/process-search\",\n        filename: \"route\",\n        bundlePath: \"app/api/process-search/route\"\n    },\n    resolvedPagePath: \"/Users/joshbaum/nyc-housing-app/app/api/process-search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_joshbaum_nyc_housing_app_app_api_process_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/process-search/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9jZXNzLXNlYXJjaCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvY2Vzcy1zZWFyY2glMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9jZXNzLXNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmpvc2hiYXVtJTJGbnljLWhvdXNpbmctYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmpvc2hiYXVtJTJGbnljLWhvdXNpbmctYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2U7QUFDNUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ueWMtaG91c2luZy1hcHAvPzBiOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2pvc2hiYXVtL255Yy1ob3VzaW5nLWFwcC9hcHAvYXBpL3Byb2Nlc3Mtc2VhcmNoL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9jZXNzLXNlYXJjaC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2Nlc3Mtc2VhcmNoXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9jZXNzLXNlYXJjaC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9qb3NoYmF1bS9ueWMtaG91c2luZy1hcHAvYXBwL2FwaS9wcm9jZXNzLXNlYXJjaC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9jZXNzLXNlYXJjaC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-search%2Froute&page=%2Fapi%2Fprocess-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-search%2Froute.ts&appDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/process-search/route.ts":
/*!*****************************************!*\
  !*** ./app/api/process-search/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nif (!process.env.OPENAI_API_KEY) {\n    throw new Error(\"Missing OPENAI_API_KEY environment variable\");\n}\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// User-friendly neighborhood groups\nconst NEIGHBORHOOD_GROUPS = {\n    \"manhattan\": [\n        \"roosevelt-island\",\n        \"financial-district\",\n        \"tribeca\",\n        \"soho\",\n        \"little-italy\",\n        \"lower-east-side\",\n        \"chinatown\",\n        \"battery-park-city\",\n        \"gramercy-park\",\n        \"chelsea\",\n        \"west-chelsea\",\n        \"greenwich-village\",\n        \"east-village\",\n        \"west-village\",\n        \"flatiron\",\n        \"nomad\",\n        \"nolita\",\n        \"midtown\",\n        \"central-park-south\",\n        \"midtown-south\",\n        \"midtown-east\",\n        \"murray-hill\",\n        \"kips-bay\",\n        \"midtown-west\",\n        \"hells-kitchen\",\n        \"upper-west-side\",\n        \"lincoln-square\",\n        \"upper-east-side\",\n        \"lenox-hill\",\n        \"yorkville\",\n        \"carnegie-hill\",\n        \"morningside-heights\",\n        \"hamilton-heights\",\n        \"washington-heights\",\n        \"inwood\",\n        \"central-harlem\",\n        \"east-harlem\",\n        \"south-harlem\"\n    ],\n    \"brooklyn\": [\n        \"greenpoint\",\n        \"williamsburg\",\n        \"east-williamsburg\",\n        \"downtown-brooklyn\",\n        \"fort-greene\",\n        \"brooklyn-heights\",\n        \"boerum-hill\",\n        \"dumbo\",\n        \"bedford-stuyvesant\",\n        \"bushwick\",\n        \"red-hook\",\n        \"park-slope\",\n        \"gowanus\",\n        \"carroll-gardens\",\n        \"cobble-hill\",\n        \"sunset-park\",\n        \"windsor-terrace\",\n        \"crown-heights\",\n        \"prospect-heights\",\n        \"clinton-hill\"\n    ],\n    \"queens\": [\n        \"astoria\",\n        \"long-island-city\",\n        \"sunnyside\",\n        \"woodside\",\n        \"jackson-heights\",\n        \"forest-hills\",\n        \"flushing\",\n        \"ridgewood\"\n    ],\n    \"bronx\": [\n        \"mott-haven\",\n        \"riverdale\",\n        \"concourse\",\n        \"fordham\",\n        \"pelham-bay\",\n        \"morris-park\",\n        \"woodlawn\"\n    ],\n    \"staten-island\": [\n        \"saint-george\",\n        \"tompkinsville\",\n        \"stapleton\"\n    ],\n    \"downtown\": [\n        \"financial-district\",\n        \"tribeca\",\n        \"soho\",\n        \"little-italy\",\n        \"lower-east-side\",\n        \"chinatown\",\n        \"battery-park-city\",\n        \"west-village\",\n        \"east-village\",\n        \"nolita\"\n    ],\n    \"midtown\": [\n        \"chelsea\",\n        \"gramercy-park\",\n        \"flatiron\",\n        \"nomad\",\n        \"midtown\",\n        \"midtown-south\",\n        \"midtown-east\",\n        \"murray-hill\",\n        \"kips-bay\",\n        \"midtown-west\",\n        \"hells-kitchen\"\n    ],\n    \"upper-manhattan\": [\n        \"upper-west-side\",\n        \"upper-east-side\",\n        \"morningside-heights\",\n        \"hamilton-heights\",\n        \"washington-heights\",\n        \"inwood\",\n        \"central-harlem\",\n        \"east-harlem\"\n    ]\n};\n// Friendly names for conversation\nconst USER_FRIENDLY_AREAS = [\n    \"Manhattan\",\n    \"Brooklyn\",\n    \"Queens\",\n    \"Bronx\",\n    \"Staten Island\",\n    \"Downtown Manhattan\",\n    \"Midtown\",\n    \"Upper Manhattan\",\n    \"East Village\",\n    \"West Village\",\n    \"Lower East Side\",\n    \"Upper East Side\",\n    \"Upper West Side\",\n    \"Chelsea\",\n    \"Tribeca\",\n    \"SoHo\",\n    \"Financial District\",\n    \"Williamsburg\",\n    \"Bushwick\",\n    \"Greenpoint\",\n    \"DUMBO\",\n    \"Park Slope\",\n    \"Astoria\",\n    \"Long Island City\",\n    \"Forest Hills\"\n];\nfunction expandAreaToStreetEasyCodes(area) {\n    // Convert user-friendly name to lowercase and remove spaces\n    const normalizedArea = area.toLowerCase().replace(/\\s+/g, \"-\");\n    // Direct mapping if it's a specific neighborhood\n    if (Object.values(NEIGHBORHOOD_GROUPS).flat().includes(normalizedArea)) {\n        return [\n            normalizedArea\n        ];\n    }\n    // Return group of neighborhoods if it's a broader area\n    return NEIGHBORHOOD_GROUPS[normalizedArea] || [];\n}\nasync function POST(request) {\n    try {\n        const { query, conversationHistory } = await request.json();\n        const messages = [\n            {\n                role: \"system\",\n                content: `You are a helpful NYC apartment search assistant. Your goal is to help users find apartments by understanding their preferences and constraints.\n\nYou must ALWAYS respond with a valid JSON object and nothing else. The response must follow this format:\n{\n  \"needsMoreInfo\": boolean,\n  \"followUpQuestion\": string (if needsMoreInfo is true),\n  \"areas\": string (comma-separated area codes),\n  \"minBeds\": string (optional),\n  \"maxBeds\": string (optional),\n  \"minBaths\": string (optional),\n  \"minPrice\": string (optional),\n  \"maxPrice\": string (optional),\n  \"noFee\": string (optional),\n  \"additionalPreferences\": {\n    \"mustHave\": string[],\n    \"modernPreference\": boolean (optional),\n    \"naturalLightPreference\": boolean (optional),\n    \"appliancePreference\": \"new\" | \"any\" (optional)\n  }\n}\n\nKey parameters you should identify:\n- Areas/neighborhoods (valid options: ${USER_FRIENDLY_AREAS.join(\", \")})\n- Price range (minPrice and maxPrice)\n- Number of bedrooms (minBeds and maxBeds)\n- Number of bathrooms (minBaths)\n- No fee preference (true/false)\n- Additional preferences:\n  - Must-have amenities (e.g., dishwasher, laundry, etc.)\n  - Modern apartment preference\n  - Natural light preference\n  - Appliance quality preference\n\nIf any essential information is missing (area, price, or bedrooms), set needsMoreInfo to true and provide a natural follow-up question.\n\nWhen responding about neighborhoods, use the friendly names in your conversation, but include the exact area codes in your JSON response.`\n            },\n            ...conversationHistory,\n            {\n                role: \"user\",\n                content: query\n            }\n        ];\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages,\n            temperature: 0.1 // Add low temperature for more consistent JSON formatting\n        });\n        const response = completion.choices[0].message.content;\n        if (!response) {\n            throw new Error(\"No response from OpenAI\");\n        }\n        const rawPreferences = JSON.parse(response);\n        // Convert user-friendly areas to StreetEasy area codes\n        if (rawPreferences.areas) {\n            const userAreas = rawPreferences.areas.split(\",\").map((a)=>a.trim());\n            const streetEasyAreas = userAreas.flatMap(expandAreaToStreetEasyCodes);\n            rawPreferences.areas = streetEasyAreas.join(\",\");\n        }\n        const processedPreferences = rawPreferences;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(processedPreferences);\n    } catch (error) {\n        console.error(\"Error processing search:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process search query\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2Nlc3Mtc2VhcmNoL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNmO0FBRTVCLElBQUksQ0FBQ0UsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEVBQUU7SUFDL0IsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMsU0FBUyxJQUFJTCw4Q0FBTUEsQ0FBQztJQUN4Qk0sUUFBUUwsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQ3BDO0FBa0JBLG9DQUFvQztBQUNwQyxNQUFNSSxzQkFBZ0Q7SUFDcEQsYUFBYTtRQUFDO1FBQW9CO1FBQXNCO1FBQVc7UUFBUTtRQUN6RTtRQUFtQjtRQUFhO1FBQXFCO1FBQ3JEO1FBQVc7UUFBZ0I7UUFBcUI7UUFBZ0I7UUFDaEU7UUFBWTtRQUFTO1FBQVU7UUFBVztRQUFzQjtRQUNoRTtRQUFnQjtRQUFlO1FBQVk7UUFBZ0I7UUFDM0Q7UUFBbUI7UUFBa0I7UUFBbUI7UUFBYztRQUN0RTtRQUFpQjtRQUF1QjtRQUFvQjtRQUM1RDtRQUFVO1FBQWtCO1FBQWU7S0FBZTtJQUM1RCxZQUFZO1FBQUM7UUFBYztRQUFnQjtRQUFxQjtRQUM5RDtRQUFlO1FBQW9CO1FBQWU7UUFBUztRQUMzRDtRQUFZO1FBQVk7UUFBYztRQUFXO1FBQW1CO1FBQ3BFO1FBQWU7UUFBbUI7UUFBaUI7UUFBb0I7S0FBZTtJQUN4RixVQUFVO1FBQUM7UUFBVztRQUFvQjtRQUFhO1FBQVk7UUFDakU7UUFBZ0I7UUFBWTtLQUFZO0lBQzFDLFNBQVM7UUFBQztRQUFjO1FBQWE7UUFBYTtRQUFXO1FBQWM7UUFDekU7S0FBVztJQUNiLGlCQUFpQjtRQUFDO1FBQWdCO1FBQWlCO0tBQVk7SUFDL0QsWUFBWTtRQUFDO1FBQXNCO1FBQVc7UUFBUTtRQUFnQjtRQUNwRTtRQUFhO1FBQXFCO1FBQWdCO1FBQWdCO0tBQVM7SUFDN0UsV0FBVztRQUFDO1FBQVc7UUFBaUI7UUFBWTtRQUFTO1FBQVc7UUFDdEU7UUFBZ0I7UUFBZTtRQUFZO1FBQWdCO0tBQWdCO0lBQzdFLG1CQUFtQjtRQUFDO1FBQW1CO1FBQW1CO1FBQ3hEO1FBQW9CO1FBQXNCO1FBQVU7UUFBa0I7S0FBYztBQUN4RjtBQUVBLGtDQUFrQztBQUNsQyxNQUFNQyxzQkFBc0I7SUFDMUI7SUFBYTtJQUFZO0lBQVU7SUFBUztJQUM1QztJQUFzQjtJQUFXO0lBQ2pDO0lBQWdCO0lBQWdCO0lBQW1CO0lBQW1CO0lBQ3RFO0lBQVc7SUFBVztJQUFRO0lBQzlCO0lBQWdCO0lBQVk7SUFBYztJQUFTO0lBQ25EO0lBQVc7SUFBb0I7Q0FDaEM7QUFFRCxTQUFTQyw0QkFBNEJDLElBQVk7SUFDL0MsNERBQTREO0lBQzVELE1BQU1DLGlCQUFpQkQsS0FBS0UsV0FBVyxHQUFHQyxPQUFPLENBQUMsUUFBUTtJQUUxRCxpREFBaUQ7SUFDakQsSUFBSUMsT0FBT0MsTUFBTSxDQUFDUixxQkFBcUJTLElBQUksR0FBR0MsUUFBUSxDQUFDTixpQkFBaUI7UUFDdEUsT0FBTztZQUFDQTtTQUFlO0lBQ3pCO0lBRUEsdURBQXVEO0lBQ3ZELE9BQU9KLG1CQUFtQixDQUFDSSxlQUFlLElBQUksRUFBRTtBQUNsRDtBQUVPLGVBQWVPLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsbUJBQW1CLEVBQUUsR0FBRyxNQUFNRixRQUFRRyxJQUFJO1FBRXpELE1BQU1DLFdBQVc7WUFDZjtnQkFDRUMsTUFBTTtnQkFDTkMsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NDQXNCb0IsRUFBRWpCLG9CQUFvQmtCLElBQUksQ0FBQyxNQUFNOzs7Ozs7Ozs7Ozs7O3lJQWFrRSxDQUFDO1lBQ3BJO2VBQ0dMO1lBQ0g7Z0JBQUVHLE1BQU07Z0JBQVFDLFNBQVNMO1lBQU07U0FDaEM7UUFFRCxNQUFNTyxhQUFhLE1BQU10QixPQUFPdUIsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUN0REMsT0FBTztZQUNQUjtZQUNBUyxhQUFhLElBQUksMERBQTBEO1FBQzdFO1FBRUEsTUFBTUMsV0FBV04sV0FBV08sT0FBTyxDQUFDLEVBQUUsQ0FBQ0MsT0FBTyxDQUFDVixPQUFPO1FBQ3RELElBQUksQ0FBQ1EsVUFBVTtZQUNiLE1BQU0sSUFBSTdCLE1BQU07UUFDbEI7UUFFQSxNQUFNZ0MsaUJBQWlCQyxLQUFLQyxLQUFLLENBQUNMO1FBRWxDLHVEQUF1RDtRQUN2RCxJQUFJRyxlQUFlRyxLQUFLLEVBQUU7WUFDeEIsTUFBTUMsWUFBWUosZUFBZUcsS0FBSyxDQUFDRSxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDLENBQUNDLElBQWNBLEVBQUVDLElBQUk7WUFDM0UsTUFBTUMsa0JBQWtCTCxVQUFVTSxPQUFPLENBQUNyQztZQUMxQzJCLGVBQWVHLEtBQUssR0FBR00sZ0JBQWdCbkIsSUFBSSxDQUFDO1FBQzlDO1FBRUEsTUFBTXFCLHVCQUF1Qlg7UUFLN0IsT0FBT3JDLGtGQUFZQSxDQUFDdUIsSUFBSSxDQUFDeUI7SUFDM0IsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU9qRCxrRkFBWUEsQ0FBQ3VCLElBQUksQ0FDdEI7WUFBRTBCLE9BQU87UUFBaUMsR0FDMUM7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ueWMtaG91c2luZy1hcHAvLi9hcHAvYXBpL3Byb2Nlc3Mtc2VhcmNoL3JvdXRlLnRzP2EwYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xuXG5pZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPUEVOQUlfQVBJX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xufVxuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWVxufSk7XG5cbmludGVyZmFjZSBQcm9jZXNzZWRQcmVmZXJlbmNlcyB7XG4gIGFyZWFzPzogc3RyaW5nO1xuICBtaW5CZWRzPzogc3RyaW5nO1xuICBtYXhCZWRzPzogc3RyaW5nO1xuICBtaW5CYXRocz86IHN0cmluZztcbiAgbWluUHJpY2U/OiBzdHJpbmc7XG4gIG1heFByaWNlPzogc3RyaW5nO1xuICBub0ZlZT86IHN0cmluZztcbiAgYWRkaXRpb25hbFByZWZlcmVuY2VzOiB7XG4gICAgbXVzdEhhdmU6IHN0cmluZ1tdO1xuICAgIG1vZGVyblByZWZlcmVuY2U/OiBib29sZWFuO1xuICAgIG5hdHVyYWxMaWdodFByZWZlcmVuY2U/OiBib29sZWFuO1xuICAgIGFwcGxpYW5jZVByZWZlcmVuY2U/OiAnbmV3JyB8ICdhbnknO1xuICB9O1xufVxuXG4vLyBVc2VyLWZyaWVuZGx5IG5laWdoYm9yaG9vZCBncm91cHNcbmNvbnN0IE5FSUdIQk9SSE9PRF9HUk9VUFM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgJ21hbmhhdHRhbic6IFsncm9vc2V2ZWx0LWlzbGFuZCcsICdmaW5hbmNpYWwtZGlzdHJpY3QnLCAndHJpYmVjYScsICdzb2hvJywgJ2xpdHRsZS1pdGFseScsXG4gICAgJ2xvd2VyLWVhc3Qtc2lkZScsICdjaGluYXRvd24nLCAnYmF0dGVyeS1wYXJrLWNpdHknLCAnZ3JhbWVyY3ktcGFyaycsXG4gICAgJ2NoZWxzZWEnLCAnd2VzdC1jaGVsc2VhJywgJ2dyZWVud2ljaC12aWxsYWdlJywgJ2Vhc3QtdmlsbGFnZScsICd3ZXN0LXZpbGxhZ2UnLFxuICAgICdmbGF0aXJvbicsICdub21hZCcsICdub2xpdGEnLCAnbWlkdG93bicsICdjZW50cmFsLXBhcmstc291dGgnLCAnbWlkdG93bi1zb3V0aCcsXG4gICAgJ21pZHRvd24tZWFzdCcsICdtdXJyYXktaGlsbCcsICdraXBzLWJheScsICdtaWR0b3duLXdlc3QnLCAnaGVsbHMta2l0Y2hlbicsXG4gICAgJ3VwcGVyLXdlc3Qtc2lkZScsICdsaW5jb2xuLXNxdWFyZScsICd1cHBlci1lYXN0LXNpZGUnLCAnbGVub3gtaGlsbCcsICd5b3JrdmlsbGUnLFxuICAgICdjYXJuZWdpZS1oaWxsJywgJ21vcm5pbmdzaWRlLWhlaWdodHMnLCAnaGFtaWx0b24taGVpZ2h0cycsICd3YXNoaW5ndG9uLWhlaWdodHMnLFxuICAgICdpbndvb2QnLCAnY2VudHJhbC1oYXJsZW0nLCAnZWFzdC1oYXJsZW0nLCAnc291dGgtaGFybGVtJ10sXG4gICdicm9va2x5bic6IFsnZ3JlZW5wb2ludCcsICd3aWxsaWFtc2J1cmcnLCAnZWFzdC13aWxsaWFtc2J1cmcnLCAnZG93bnRvd24tYnJvb2tseW4nLFxuICAgICdmb3J0LWdyZWVuZScsICdicm9va2x5bi1oZWlnaHRzJywgJ2JvZXJ1bS1oaWxsJywgJ2R1bWJvJywgJ2JlZGZvcmQtc3R1eXZlc2FudCcsXG4gICAgJ2J1c2h3aWNrJywgJ3JlZC1ob29rJywgJ3Bhcmstc2xvcGUnLCAnZ293YW51cycsICdjYXJyb2xsLWdhcmRlbnMnLCAnY29iYmxlLWhpbGwnLFxuICAgICdzdW5zZXQtcGFyaycsICd3aW5kc29yLXRlcnJhY2UnLCAnY3Jvd24taGVpZ2h0cycsICdwcm9zcGVjdC1oZWlnaHRzJywgJ2NsaW50b24taGlsbCddLFxuICAncXVlZW5zJzogWydhc3RvcmlhJywgJ2xvbmctaXNsYW5kLWNpdHknLCAnc3VubnlzaWRlJywgJ3dvb2RzaWRlJywgJ2phY2tzb24taGVpZ2h0cycsXG4gICAgJ2ZvcmVzdC1oaWxscycsICdmbHVzaGluZycsICdyaWRnZXdvb2QnXSxcbiAgJ2Jyb254JzogWydtb3R0LWhhdmVuJywgJ3JpdmVyZGFsZScsICdjb25jb3Vyc2UnLCAnZm9yZGhhbScsICdwZWxoYW0tYmF5JywgJ21vcnJpcy1wYXJrJyxcbiAgICAnd29vZGxhd24nXSxcbiAgJ3N0YXRlbi1pc2xhbmQnOiBbJ3NhaW50LWdlb3JnZScsICd0b21wa2luc3ZpbGxlJywgJ3N0YXBsZXRvbiddLFxuICAnZG93bnRvd24nOiBbJ2ZpbmFuY2lhbC1kaXN0cmljdCcsICd0cmliZWNhJywgJ3NvaG8nLCAnbGl0dGxlLWl0YWx5JywgJ2xvd2VyLWVhc3Qtc2lkZScsIFxuICAgICdjaGluYXRvd24nLCAnYmF0dGVyeS1wYXJrLWNpdHknLCAnd2VzdC12aWxsYWdlJywgJ2Vhc3QtdmlsbGFnZScsICdub2xpdGEnXSxcbiAgJ21pZHRvd24nOiBbJ2NoZWxzZWEnLCAnZ3JhbWVyY3ktcGFyaycsICdmbGF0aXJvbicsICdub21hZCcsICdtaWR0b3duJywgJ21pZHRvd24tc291dGgnLFxuICAgICdtaWR0b3duLWVhc3QnLCAnbXVycmF5LWhpbGwnLCAna2lwcy1iYXknLCAnbWlkdG93bi13ZXN0JywgJ2hlbGxzLWtpdGNoZW4nXSxcbiAgJ3VwcGVyLW1hbmhhdHRhbic6IFsndXBwZXItd2VzdC1zaWRlJywgJ3VwcGVyLWVhc3Qtc2lkZScsICdtb3JuaW5nc2lkZS1oZWlnaHRzJywgXG4gICAgJ2hhbWlsdG9uLWhlaWdodHMnLCAnd2FzaGluZ3Rvbi1oZWlnaHRzJywgJ2lud29vZCcsICdjZW50cmFsLWhhcmxlbScsICdlYXN0LWhhcmxlbSddXG59O1xuXG4vLyBGcmllbmRseSBuYW1lcyBmb3IgY29udmVyc2F0aW9uXG5jb25zdCBVU0VSX0ZSSUVORExZX0FSRUFTID0gW1xuICAnTWFuaGF0dGFuJywgJ0Jyb29rbHluJywgJ1F1ZWVucycsICdCcm9ueCcsICdTdGF0ZW4gSXNsYW5kJyxcbiAgJ0Rvd250b3duIE1hbmhhdHRhbicsICdNaWR0b3duJywgJ1VwcGVyIE1hbmhhdHRhbicsXG4gICdFYXN0IFZpbGxhZ2UnLCAnV2VzdCBWaWxsYWdlJywgJ0xvd2VyIEVhc3QgU2lkZScsICdVcHBlciBFYXN0IFNpZGUnLCAnVXBwZXIgV2VzdCBTaWRlJyxcbiAgJ0NoZWxzZWEnLCAnVHJpYmVjYScsICdTb0hvJywgJ0ZpbmFuY2lhbCBEaXN0cmljdCcsXG4gICdXaWxsaWFtc2J1cmcnLCAnQnVzaHdpY2snLCAnR3JlZW5wb2ludCcsICdEVU1CTycsICdQYXJrIFNsb3BlJyxcbiAgJ0FzdG9yaWEnLCAnTG9uZyBJc2xhbmQgQ2l0eScsICdGb3Jlc3QgSGlsbHMnXG5dO1xuXG5mdW5jdGlvbiBleHBhbmRBcmVhVG9TdHJlZXRFYXN5Q29kZXMoYXJlYTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAvLyBDb252ZXJ0IHVzZXItZnJpZW5kbHkgbmFtZSB0byBsb3dlcmNhc2UgYW5kIHJlbW92ZSBzcGFjZXNcbiAgY29uc3Qgbm9ybWFsaXplZEFyZWEgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuICBcbiAgLy8gRGlyZWN0IG1hcHBpbmcgaWYgaXQncyBhIHNwZWNpZmljIG5laWdoYm9yaG9vZFxuICBpZiAoT2JqZWN0LnZhbHVlcyhORUlHSEJPUkhPT0RfR1JPVVBTKS5mbGF0KCkuaW5jbHVkZXMobm9ybWFsaXplZEFyZWEpKSB7XG4gICAgcmV0dXJuIFtub3JtYWxpemVkQXJlYV07XG4gIH1cbiAgXG4gIC8vIFJldHVybiBncm91cCBvZiBuZWlnaGJvcmhvb2RzIGlmIGl0J3MgYSBicm9hZGVyIGFyZWFcbiAgcmV0dXJuIE5FSUdIQk9SSE9PRF9HUk9VUFNbbm9ybWFsaXplZEFyZWFdIHx8IFtdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBxdWVyeSwgY29udmVyc2F0aW9uSGlzdG9yeSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6IGBZb3UgYXJlIGEgaGVscGZ1bCBOWUMgYXBhcnRtZW50IHNlYXJjaCBhc3Npc3RhbnQuIFlvdXIgZ29hbCBpcyB0byBoZWxwIHVzZXJzIGZpbmQgYXBhcnRtZW50cyBieSB1bmRlcnN0YW5kaW5nIHRoZWlyIHByZWZlcmVuY2VzIGFuZCBjb25zdHJhaW50cy5cblxuWW91IG11c3QgQUxXQVlTIHJlc3BvbmQgd2l0aCBhIHZhbGlkIEpTT04gb2JqZWN0IGFuZCBub3RoaW5nIGVsc2UuIFRoZSByZXNwb25zZSBtdXN0IGZvbGxvdyB0aGlzIGZvcm1hdDpcbntcbiAgXCJuZWVkc01vcmVJbmZvXCI6IGJvb2xlYW4sXG4gIFwiZm9sbG93VXBRdWVzdGlvblwiOiBzdHJpbmcgKGlmIG5lZWRzTW9yZUluZm8gaXMgdHJ1ZSksXG4gIFwiYXJlYXNcIjogc3RyaW5nIChjb21tYS1zZXBhcmF0ZWQgYXJlYSBjb2RlcyksXG4gIFwibWluQmVkc1wiOiBzdHJpbmcgKG9wdGlvbmFsKSxcbiAgXCJtYXhCZWRzXCI6IHN0cmluZyAob3B0aW9uYWwpLFxuICBcIm1pbkJhdGhzXCI6IHN0cmluZyAob3B0aW9uYWwpLFxuICBcIm1pblByaWNlXCI6IHN0cmluZyAob3B0aW9uYWwpLFxuICBcIm1heFByaWNlXCI6IHN0cmluZyAob3B0aW9uYWwpLFxuICBcIm5vRmVlXCI6IHN0cmluZyAob3B0aW9uYWwpLFxuICBcImFkZGl0aW9uYWxQcmVmZXJlbmNlc1wiOiB7XG4gICAgXCJtdXN0SGF2ZVwiOiBzdHJpbmdbXSxcbiAgICBcIm1vZGVyblByZWZlcmVuY2VcIjogYm9vbGVhbiAob3B0aW9uYWwpLFxuICAgIFwibmF0dXJhbExpZ2h0UHJlZmVyZW5jZVwiOiBib29sZWFuIChvcHRpb25hbCksXG4gICAgXCJhcHBsaWFuY2VQcmVmZXJlbmNlXCI6IFwibmV3XCIgfCBcImFueVwiIChvcHRpb25hbClcbiAgfVxufVxuXG5LZXkgcGFyYW1ldGVycyB5b3Ugc2hvdWxkIGlkZW50aWZ5OlxuLSBBcmVhcy9uZWlnaGJvcmhvb2RzICh2YWxpZCBvcHRpb25zOiAke1VTRVJfRlJJRU5ETFlfQVJFQVMuam9pbignLCAnKX0pXG4tIFByaWNlIHJhbmdlIChtaW5QcmljZSBhbmQgbWF4UHJpY2UpXG4tIE51bWJlciBvZiBiZWRyb29tcyAobWluQmVkcyBhbmQgbWF4QmVkcylcbi0gTnVtYmVyIG9mIGJhdGhyb29tcyAobWluQmF0aHMpXG4tIE5vIGZlZSBwcmVmZXJlbmNlICh0cnVlL2ZhbHNlKVxuLSBBZGRpdGlvbmFsIHByZWZlcmVuY2VzOlxuICAtIE11c3QtaGF2ZSBhbWVuaXRpZXMgKGUuZy4sIGRpc2h3YXNoZXIsIGxhdW5kcnksIGV0Yy4pXG4gIC0gTW9kZXJuIGFwYXJ0bWVudCBwcmVmZXJlbmNlXG4gIC0gTmF0dXJhbCBsaWdodCBwcmVmZXJlbmNlXG4gIC0gQXBwbGlhbmNlIHF1YWxpdHkgcHJlZmVyZW5jZVxuXG5JZiBhbnkgZXNzZW50aWFsIGluZm9ybWF0aW9uIGlzIG1pc3NpbmcgKGFyZWEsIHByaWNlLCBvciBiZWRyb29tcyksIHNldCBuZWVkc01vcmVJbmZvIHRvIHRydWUgYW5kIHByb3ZpZGUgYSBuYXR1cmFsIGZvbGxvdy11cCBxdWVzdGlvbi5cblxuV2hlbiByZXNwb25kaW5nIGFib3V0IG5laWdoYm9yaG9vZHMsIHVzZSB0aGUgZnJpZW5kbHkgbmFtZXMgaW4geW91ciBjb252ZXJzYXRpb24sIGJ1dCBpbmNsdWRlIHRoZSBleGFjdCBhcmVhIGNvZGVzIGluIHlvdXIgSlNPTiByZXNwb25zZS5gXG4gICAgICB9LFxuICAgICAgLi4uY29udmVyc2F0aW9uSGlzdG9yeSxcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBxdWVyeSB9XG4gICAgXTtcblxuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNCcsXG4gICAgICBtZXNzYWdlcyxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjEgLy8gQWRkIGxvdyB0ZW1wZXJhdHVyZSBmb3IgbW9yZSBjb25zaXN0ZW50IEpTT04gZm9ybWF0dGluZ1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZnJvbSBPcGVuQUknKTtcbiAgICB9XG5cbiAgICBjb25zdCByYXdQcmVmZXJlbmNlcyA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuICAgIFxuICAgIC8vIENvbnZlcnQgdXNlci1mcmllbmRseSBhcmVhcyB0byBTdHJlZXRFYXN5IGFyZWEgY29kZXNcbiAgICBpZiAocmF3UHJlZmVyZW5jZXMuYXJlYXMpIHtcbiAgICAgIGNvbnN0IHVzZXJBcmVhcyA9IHJhd1ByZWZlcmVuY2VzLmFyZWFzLnNwbGl0KCcsJykubWFwKChhOiBzdHJpbmcpID0+IGEudHJpbSgpKTtcbiAgICAgIGNvbnN0IHN0cmVldEVhc3lBcmVhcyA9IHVzZXJBcmVhcy5mbGF0TWFwKGV4cGFuZEFyZWFUb1N0cmVldEVhc3lDb2Rlcyk7XG4gICAgICByYXdQcmVmZXJlbmNlcy5hcmVhcyA9IHN0cmVldEVhc3lBcmVhcy5qb2luKCcsJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvY2Vzc2VkUHJlZmVyZW5jZXMgPSByYXdQcmVmZXJlbmNlcyBhcyBQcm9jZXNzZWRQcmVmZXJlbmNlcyAmIHtcbiAgICAgIG5lZWRzTW9yZUluZm86IGJvb2xlYW47XG4gICAgICBmb2xsb3dVcFF1ZXN0aW9uPzogc3RyaW5nO1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocHJvY2Vzc2VkUHJlZmVyZW5jZXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3Npbmcgc2VhcmNoOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3Mgc2VhcmNoIHF1ZXJ5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiT3BlbkFJIiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiRXJyb3IiLCJvcGVuYWkiLCJhcGlLZXkiLCJORUlHSEJPUkhPT0RfR1JPVVBTIiwiVVNFUl9GUklFTkRMWV9BUkVBUyIsImV4cGFuZEFyZWFUb1N0cmVldEVhc3lDb2RlcyIsImFyZWEiLCJub3JtYWxpemVkQXJlYSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsIk9iamVjdCIsInZhbHVlcyIsImZsYXQiLCJpbmNsdWRlcyIsIlBPU1QiLCJyZXF1ZXN0IiwicXVlcnkiLCJjb252ZXJzYXRpb25IaXN0b3J5IiwianNvbiIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJqb2luIiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwidGVtcGVyYXR1cmUiLCJyZXNwb25zZSIsImNob2ljZXMiLCJtZXNzYWdlIiwicmF3UHJlZmVyZW5jZXMiLCJKU09OIiwicGFyc2UiLCJhcmVhcyIsInVzZXJBcmVhcyIsInNwbGl0IiwibWFwIiwiYSIsInRyaW0iLCJzdHJlZXRFYXN5QXJlYXMiLCJmbGF0TWFwIiwicHJvY2Vzc2VkUHJlZmVyZW5jZXMiLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/process-search/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/node-fetch","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/formdata-node","vendor-chunks/webidl-conversions","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/openai","vendor-chunks/form-data-encoder","vendor-chunks/agentkeepalive","vendor-chunks/web-streams-polyfill","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-search%2Froute&page=%2Fapi%2Fprocess-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-search%2Froute.ts&appDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjoshbaum%2Fnyc-housing-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();